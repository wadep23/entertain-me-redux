{"ast":null,"code":"import _regeneratorRuntime from\"G:/projects/entertain-me-redux/client/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"G:/projects/entertain-me-redux/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"G:/projects/entertain-me-redux/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/projects/entertain-me-redux/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Button,Card,Row,Container,Col}from'react-bootstrap';import{useMutation,useLazyQuery}from'@apollo/client';import{SAVE_MOVIE,ADD_POST}from'../../utils/mutations';import{MOVIE_API_QUERY}from'../../utils/queries';import MovieModal from'../MovieModal';import Auth from'../../utils/auth';import{FaLaughSquint,FaHeart,FaSadCry,FaHatCowboy,FaMusic}from\"react-icons/fa\";import{GiPistolGun,GiEarthAmerica,GiGhost,GiUnicorn,GiMagnifyingGlass,GiTvRemote,GiSpartanHelmet,GiHandcuffs,GiFamilyHouse,GiAncientColumns}from\"react-icons/gi\";import{RiAliensFill,RiKnifeBloodLine}from\"react-icons/ri\";import{BiCameraMovie}from\"react-icons/bi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchMovies=function SearchMovies(){var imgLink=\"https://image.tmdb.org/t/p/w500\";var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMovieTrailerModal=_useState2[0],setShowMovieTrailerModal=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),movieTrailerModalTitle=_useState4[0],setMovieTrailerModalTitle=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),searchedMedia=_useState6[0],setSearchedMedia=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),savedMedia=_useState8[0],setSavedMedia=_useState8[1];var _useLazyQuery=useLazyQuery(MOVIE_API_QUERY),_useLazyQuery2=_slicedToArray(_useLazyQuery,2),getGenre=_useLazyQuery2[0],_useLazyQuery2$=_useLazyQuery2[1],loading=_useLazyQuery2$.loading,data=_useLazyQuery2$.data;var _useMutation=useMutation(SAVE_MOVIE),_useMutation2=_slicedToArray(_useMutation,1),saveMovie=_useMutation2[0];var _useMutation3=useMutation(ADD_POST),_useMutation4=_slicedToArray(_useMutation3,1),createPost=_useMutation4[0];useEffect(function(){if(data){var movieData=data.movie.map(function(movies){return{movieId:movies.id,movieName:movies.original_title,moviePoster:imgLink+movies.poster_path,movieDetails:movies.overview,movieRating:movies.vote_average};});setSearchedMedia(movieData);}},[data,imgLink]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}var handleSaveMedia=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(movieId){var movieToSave;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:movieToSave=searchedMedia.find(function(media){return media.movieId===movieId;});_context.prev=1;_context.next=4;return saveMovie({variables:{movieId:movieToSave.movieId,movieName:movieToSave.movieName,moviePoster:movieToSave.moviePoster,movieDetails:movieToSave.movieDetails,movieRating:movieToSave.movieRating}});case 4:_context.next=6;return createPost({variables:{postText:\" saved \".concat(movieToSave.movieName,\" to their favorite movies!\")}});case 6:setSavedMedia([].concat(_toConsumableArray(savedMedia),[movieToSave.movieId]));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function handleSaveMedia(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"return-data\",children:[/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Row,{fluid:\"true\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:28}});},children:[/*#__PURE__*/_jsx(GiPistolGun,{}),\" Action\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:12}});},children:[/*#__PURE__*/_jsx(GiEarthAmerica,{}),\" Adventure\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:35}});},children:[/*#__PURE__*/_jsx(FaLaughSquint,{}),\" Comedy\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:80}});},children:[/*#__PURE__*/_jsx(GiHandcuffs,{}),\" Crime\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:99}});},children:[/*#__PURE__*/_jsx(BiCameraMovie,{}),\" Documentary\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:18}});},children:[/*#__PURE__*/_jsx(FaSadCry,{}),\" Drama\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:10751}});},children:[/*#__PURE__*/_jsx(GiFamilyHouse,{}),\" Family\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:14}});},children:[/*#__PURE__*/_jsx(GiUnicorn,{}),\" Fantasy\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:36}});},children:[/*#__PURE__*/_jsx(GiAncientColumns,{}),\" History\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:27}});},children:[/*#__PURE__*/_jsx(GiGhost,{}),\" Horror\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:10402}});},children:[/*#__PURE__*/_jsx(FaMusic,{}),\" Music\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:9648}});},children:[/*#__PURE__*/_jsx(GiMagnifyingGlass,{}),\" Mystery\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:10749}});},children:[/*#__PURE__*/_jsx(FaHeart,{}),\" Romance\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:878}});},children:[/*#__PURE__*/_jsx(RiAliensFill,{}),\" Sci-Fi\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:10770}});},children:[/*#__PURE__*/_jsx(GiTvRemote,{}),\" TV Movie\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:53}});},children:[/*#__PURE__*/_jsx(RiKnifeBloodLine,{}),\" Thriller\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:10752}});},children:[/*#__PURE__*/_jsx(GiSpartanHelmet,{}),\" War\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){getGenre({variables:{genre:37}});},children:[/*#__PURE__*/_jsx(FaHatCowboy,{}),\" Western\"]})})]}),/*#__PURE__*/_jsx(Row,{children:searchedMedia.map(function(movies){return/*#__PURE__*/_jsx(Col,{sm:3,children:/*#__PURE__*/_jsxs(Card,{style:{width:'18rem'},children:[/*#__PURE__*/_jsx(Card.Img,{src:movies.moviePoster,alt:\"The poster for \".concat(movies.movieName),variant:\"top\"}),/*#__PURE__*/_jsxs(Card.Body,{className:\"card-body\",children:[/*#__PURE__*/_jsx(Card.Title,{children:movies.movieName}),/*#__PURE__*/_jsx(Card.Text,{children:movies.movieDetails}),/*#__PURE__*/_jsxs(Card.Text,{children:[\"Rating: \",movies.movieRating]}),Auth.loggedIn()&&/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:function onClick(){handleSaveMedia(movies.movieId);},children:\"Save to your favorites!\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:function onClick(){setShowMovieTrailerModal(true);setMovieTrailerModalTitle(movies.movieName+\" Movie Trailer\");},children:\"Watch a trailer!\"})]})]},movies.movieId)});})})]}),/*#__PURE__*/_jsx(MovieModal,{showMovieTrailerModal:showMovieTrailerModal,setShowMovieTrailerModal:setShowMovieTrailerModal,movieTrailerModalTitle:movieTrailerModalTitle,setMovieTrailerModalTitle:setMovieTrailerModalTitle})]});};export default SearchMovies;","map":{"version":3,"sources":["G:/projects/entertain-me-redux/client/src/components/Movie/index.js"],"names":["React","useState","useEffect","Button","Card","Row","Container","Col","useMutation","useLazyQuery","SAVE_MOVIE","ADD_POST","MOVIE_API_QUERY","MovieModal","Auth","FaLaughSquint","FaHeart","FaSadCry","FaHatCowboy","FaMusic","GiPistolGun","GiEarthAmerica","GiGhost","GiUnicorn","GiMagnifyingGlass","GiTvRemote","GiSpartanHelmet","GiHandcuffs","GiFamilyHouse","GiAncientColumns","RiAliensFill","RiKnifeBloodLine","BiCameraMovie","SearchMovies","imgLink","showMovieTrailerModal","setShowMovieTrailerModal","movieTrailerModalTitle","setMovieTrailerModalTitle","searchedMedia","setSearchedMedia","savedMedia","setSavedMedia","getGenre","loading","data","saveMovie","createPost","movieData","movie","map","movies","movieId","id","movieName","original_title","moviePoster","poster_path","movieDetails","overview","movieRating","vote_average","handleSaveMedia","movieToSave","find","media","variables","postText","console","error","genre","width","loggedIn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {Button, Card, Row, Container, Col} from 'react-bootstrap';\nimport { useMutation, useLazyQuery } from '@apollo/client';\nimport { SAVE_MOVIE, ADD_POST } from '../../utils/mutations';\nimport { MOVIE_API_QUERY }from '../../utils/queries';\nimport MovieModal from '../MovieModal';\nimport Auth from '../../utils/auth';\nimport { FaLaughSquint, FaHeart, FaSadCry, FaHatCowboy, FaMusic } from \"react-icons/fa\";\nimport { GiPistolGun, GiEarthAmerica, GiGhost, GiUnicorn, GiMagnifyingGlass, GiTvRemote, GiSpartanHelmet, GiHandcuffs, GiFamilyHouse, GiAncientColumns  } from \"react-icons/gi\";\nimport { RiAliensFill, RiKnifeBloodLine } from \"react-icons/ri\";\nimport { BiCameraMovie } from \"react-icons/bi\";\n\nconst SearchMovies = () => {\n    let imgLink = \"https://image.tmdb.org/t/p/w500\";\n    const [showMovieTrailerModal, setShowMovieTrailerModal] = useState(false);\n    const [movieTrailerModalTitle, setMovieTrailerModalTitle] = useState('');\n    const [searchedMedia, setSearchedMedia] = useState([]);\n    const [savedMedia, setSavedMedia] = useState({});\n\n    const [getGenre, { loading, data }] = useLazyQuery(MOVIE_API_QUERY);\n    \n    const [saveMovie] = useMutation(SAVE_MOVIE);\n    const [createPost] = useMutation(ADD_POST);\n    \n    useEffect(() => {\n        if (data) {\n            let movieData = data.movie.map((movies) => ({\n                movieId: movies.id,\n                movieName: movies.original_title,\n                moviePoster: imgLink + movies.poster_path,\n                movieDetails: movies.overview,\n                movieRating: movies.vote_average\n            }));\n            setSearchedMedia(movieData) \n        }\n    }, [data, imgLink]);\n\n    if (loading) {\n        return <div>Loading...</div>\n    }\n\n    const handleSaveMedia = async (movieId) => {\n        const movieToSave = searchedMedia.find((media) => media.movieId === movieId);\n        \n        try {\n            await saveMovie({\n                variables: {\n                    movieId: movieToSave.movieId,\n                    movieName: movieToSave.movieName,\n                    moviePoster: movieToSave.moviePoster,\n                    movieDetails: movieToSave.movieDetails,\n                    movieRating: movieToSave.movieRating\n                }\n            })\n\n            await createPost({\n                variables: {\n                  postText: ` saved ${movieToSave.movieName} to their favorite movies!`  \n                }\n            })\n\n            setSavedMedia([...savedMedia, movieToSave.movieId])\n            } catch (err) {\n                console.error(err);\n            }\n    };\n\n    return (\n        <div className=\"return-data\">\n            <Container>\n                <Row fluid=\"true\">\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 28 }})}} \n                        ><GiPistolGun /> Action</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 12 }})}}\n                        ><GiEarthAmerica /> Adventure</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 35 }})}}\n                         ><FaLaughSquint /> Comedy</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 80 }})}}\n                         ><GiHandcuffs  /> Crime</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 99 }})}}\n                         ><BiCameraMovie  /> Documentary</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 18 }})}}\n                        ><FaSadCry /> Drama</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 10751 }})}}\n                        ><GiFamilyHouse /> Family</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 14 }})}}\n                        ><GiUnicorn /> Fantasy</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 36 }})}}\n                        ><GiAncientColumns /> History</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 27 }})}}\n                        ><GiGhost /> Horror</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 10402 }})}}\n                        ><FaMusic /> Music</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 9648 }})}}\n                        ><GiMagnifyingGlass /> Mystery</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 10749 }})}}\n                        ><FaHeart /> Romance</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 878 }})}}\n                        ><RiAliensFill /> Sci-Fi</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 10770 }})}}\n                        ><GiTvRemote /> TV Movie</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 53 }})}}\n                        ><RiKnifeBloodLine /> Thriller</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 10752 }})}}\n                        ><GiSpartanHelmet /> War</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: 37 }})}}\n                        ><FaHatCowboy /> Western</button>\n                    </Col>\n                </Row>\n                <Row>\n                    {searchedMedia.map((movies) => {\n                        return (\n                            <Col sm={3}>\n                                <Card key={movies.movieId} style={{ width: '18rem' }}>\n                                    <Card.Img src={movies.moviePoster} alt={`The poster for ${movies.movieName}`} variant=\"top\" />\n                                    <Card.Body className=\"card-body\">\n                                        <Card.Title>{movies.movieName}</Card.Title>\n                                        <Card.Text>{movies.movieDetails}</Card.Text>\n                                        <Card.Text>Rating: {movies.movieRating}</Card.Text>\n                                        {Auth.loggedIn() && (\n                                            <Button variant=\"primary\" onClick={() => {handleSaveMedia(movies.movieId); }}>Save to your favorites!</Button>\n                                        )}\n                                        <Button variant=\"primary\" onClick={() => {setShowMovieTrailerModal(true)\n                                         setMovieTrailerModalTitle(movies.movieName + \" Movie Trailer\"); }}\n                                        >Watch a trailer!</Button>\n                                    </Card.Body>\n                                </Card>\n                            </Col>   \n                        )   \n                    })}  \n                </Row>\n            </Container>\n            <MovieModal\n                showMovieTrailerModal={showMovieTrailerModal}\n                setShowMovieTrailerModal={setShowMovieTrailerModal}\n                movieTrailerModalTitle={movieTrailerModalTitle}\n                setMovieTrailerModalTitle={setMovieTrailerModalTitle}\n            ></MovieModal>    \n        </div>\n    );\n};\n\nexport default SearchMovies;"]},"metadata":{},"sourceType":"module"}