{"ast":null,"code":"var _jsxFileName = \"G:\\\\projects\\\\entertain-me-redux\\\\client\\\\src\\\\components\\\\Game\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Button, Card, Row, Container, Col } from 'react-bootstrap';\nimport { useMutation, useLazyQuery, useQuery } from '@apollo/client';\nimport { SAVE_GAME, ADD_POST } from '../../utils/mutations';\nimport { GAME_API_QUERY, QUERY_SELF } from '../../utils/queries';\nimport TrailerModal from '../TrailerModal';\nimport Auth from '../../utils/auth'; // will need to change this to match new API\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SearchMedia = () => {\n  _s();\n\n  let imgLink = \"https://image.tmdb.org/t/p/w500\";\n  const [gameTrailerModal, setgameTrailerModal] = useState(false);\n  const [trailerModalTitle, setTrailerModalTitle] = useState('');\n  const [searchedMedia, setSearchedMedia] = useState([]);\n  const [savedMedia, setSavedMedia] = useState({});\n  const [getGenre, {\n    loading,\n    data\n  }] = useLazyQuery(GAME_API_QUERY);\n  const [savegame] = useMutation(SAVE_GAME);\n  const [createPost] = useMutation(ADD_POST);\n  useEffect(() => {\n    if (data) {\n      let gameData = data.game.map(game => ({\n        gameId: game.id,\n        gameName: game.name,\n        gameRating: game.rating,\n        gamePoster: imgLink + game.background_image\n      }));\n      setSearchedMedia(gameData);\n    }\n  }, [data, imgLink]);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 16\n    }, this);\n  }\n\n  const handleSaveMedia = async gameId => {\n    const gameToSave = searchedMedia.find(media => media.gameId === gameId);\n\n    try {\n      await savegame({\n        variables: {\n          gameId: gameToSave.gameId,\n          gameName: gameToSave.gameName,\n          gamePoster: gameToSave.gamePoster,\n          gameRating: gameToSave.gameRating\n        }\n      });\n      await createPost({\n        variables: {\n          postText: ` saved ${gameToSave.gameName} to their favorite games!`\n        }\n      });\n      setSavedMedia([...savedMedia, gameToSave.gameId]);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"return-data\",\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        fluid: true,\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"action\"\n                }\n              });\n            },\n            children: \"Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"indie\"\n                }\n              });\n            },\n            children: \"Indie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"adventure\"\n                }\n              });\n            },\n            children: \"Adventure\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"role-playing-games-rpg\"\n                }\n              });\n            },\n            children: \"RPG\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"strategy\"\n                }\n              });\n            },\n            children: \"Strategy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"shooter\"\n                }\n              });\n            },\n            children: \"Shooter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"casual\"\n                }\n              });\n            },\n            children: \"Casual\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"simulation\"\n                }\n              });\n            },\n            children: \"Simulation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"puzzle\"\n                }\n              });\n            },\n            children: \"Puzzle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"arcade\"\n                }\n              });\n            },\n            children: \"Arcade\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"platformer\"\n                }\n              });\n            },\n            children: \"Platformer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"racing\"\n                }\n              });\n            },\n            children: \"Racing\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"massively-multiplayer\"\n                }\n              });\n            },\n            children: \"MMO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"sports\"\n                }\n              });\n            },\n            children: \"Sports\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"fighting\"\n                }\n              });\n            },\n            children: \"Fighting\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"family\"\n                }\n              });\n            },\n            children: \"Family\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"board-games\"\n                }\n              });\n            },\n            children: \"Board Games\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"educational\"\n                }\n              });\n            },\n            children: \"Education\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              getGenre({\n                variables: {\n                  genre: \"card\"\n                }\n              });\n            },\n            children: \"Card\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: searchedMedia.map(games => {\n          return /*#__PURE__*/_jsxDEV(Col, {\n            sm: 3,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              style: {\n                width: '18rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n                src: games.gamePoster,\n                alt: `The poster for ${games.gameName}`,\n                variant: \"top\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                  children: games.gameName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                  children: [\"Rating: \", games.gameRating]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 41\n                }, this), Auth.loggedIn() && /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  onClick: () => {\n                    handleSaveMedia(games.gameId);\n                  },\n                  children: \"Save to your favorites!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  onClick: () => {\n                    setgameTrailerModal(true);\n                    setTrailerModalTitle(games.gameName + \" game Trailer\");\n                  },\n                  children: \"Watch a trailer!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 37\n              }, this)]\n            }, games.gameId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TrailerModal, {\n      gameTrailerModal: gameTrailerModal,\n      setgameTrailerModal: setgameTrailerModal,\n      trailerModalTitle: trailerModalTitle,\n      setTrailerModalTitle: setTrailerModalTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SearchMedia, \"+FaeVoIwoeqovPNyjr2tTJ/OkFI=\", false, function () {\n  return [useLazyQuery, useMutation, useMutation];\n});\n\n_c = SearchMedia;\nexport default SearchMedia;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchMedia\");","map":{"version":3,"sources":["G:/projects/entertain-me-redux/client/src/components/Game/index.js"],"names":["React","useState","useEffect","Button","Card","Row","Container","Col","useMutation","useLazyQuery","useQuery","SAVE_GAME","ADD_POST","GAME_API_QUERY","QUERY_SELF","TrailerModal","Auth","SearchMedia","imgLink","gameTrailerModal","setgameTrailerModal","trailerModalTitle","setTrailerModalTitle","searchedMedia","setSearchedMedia","savedMedia","setSavedMedia","getGenre","loading","data","savegame","createPost","gameData","game","map","gameId","id","gameName","name","gameRating","rating","gamePoster","background_image","handleSaveMedia","gameToSave","find","media","variables","postText","err","console","error","genre","games","width","loggedIn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button, Card, Row, Container, Col } from 'react-bootstrap';\nimport { useMutation, useLazyQuery, useQuery } from '@apollo/client';\nimport { SAVE_GAME, ADD_POST } from '../../utils/mutations';\nimport { GAME_API_QUERY, QUERY_SELF }from '../../utils/queries';\nimport TrailerModal from '../TrailerModal';\nimport Auth from '../../utils/auth';\n\n// will need to change this to match new API\nconst SearchMedia = () => {\n    let imgLink = \"https://image.tmdb.org/t/p/w500\";\n    const [gameTrailerModal, setgameTrailerModal] = useState(false);\n    const [trailerModalTitle, setTrailerModalTitle] = useState('');\n    const [searchedMedia, setSearchedMedia] = useState([]);\n    const [savedMedia, setSavedMedia] = useState({});\n\n    const [getGenre, { loading, data }] = useLazyQuery(GAME_API_QUERY);\n    \n    const [savegame] = useMutation(SAVE_GAME);\n    const [createPost] = useMutation(ADD_POST);\n    \n    useEffect(() => {\n        if (data) {\n            let gameData = data.game.map((game) => ({\n                gameId: game.id,\n                gameName: game.name,\n                gameRating: game.rating,\n                gamePoster: imgLink + game.background_image\n            }));\n            setSearchedMedia(gameData) \n        }\n    }, [data, imgLink]);\n\n    if (loading) {\n        return <div>Loading...</div>\n    }\n\n    const handleSaveMedia = async (gameId) => {\n        const gameToSave = searchedMedia.find((media) => media.gameId === gameId);\n        \n        try {\n            await savegame({\n                variables: {\n                    gameId: gameToSave.gameId,\n                    gameName: gameToSave.gameName,\n                    gamePoster: gameToSave.gamePoster,\n                    gameRating: gameToSave.gameRating\n                }\n            })\n\n            await createPost({\n                variables: {\n                  postText: ` saved ${gameToSave.gameName} to their favorite games!`  \n                }\n            })\n\n            setSavedMedia([...savedMedia, gameToSave.gameId])\n            } catch (err) {\n                console.error(err);\n            }\n    };\n\n    return (\n        <div class=\"return-data\">\n            <Container>\n                <Row fluid>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"action\" }})}}\n                        >Action</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"indie\"}})}}\n                        >Indie</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"adventure\" }})}}\n                         >Adventure</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"role-playing-games-rpg\" }})}}\n                         >RPG</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"strategy\" }})}}\n                         >Strategy</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"shooter\" }})}}\n                         >Shooter</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"casual\" }})}}\n                         >Casual</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"simulation\" }})}}\n                         >Simulation</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"puzzle\" }})}}\n                         >Puzzle</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"arcade\" }})}}\n                         >Arcade</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"platformer\" }})}}\n                         >Platformer</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"racing\" }})}}\n                         >Racing</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"massively-multiplayer\" }})}}\n                         >MMO</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"sports\" }})}}\n                         >Sports</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"fighting\" }})}}\n                         >Fighting</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"family\" }})}}\n                         >Family</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"board-games\" }})}}\n                         >Board Games</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"educational\" }})}}\n                         >Education</button>\n                    </Col>\n                    <Col>\n                        <button onClick={() => { getGenre({ variables: { genre: \"card\" }})}}\n                         >Card</button>\n                    </Col>\n                </Row>\n                <Row>\n                    {searchedMedia.map((games) => {\n                        return (\n                            <Col sm={3}>\n                                <Card key={games.gameId} style={{ width: '18rem' }}>\n                                    <Card.Img src={games.gamePoster} alt={`The poster for ${games.gameName}`} variant=\"top\" />\n                                    <Card.Body className=\"card-body\">\n                                        <Card.Title>{games.gameName}</Card.Title>\n                                        <Card.Text>Rating: {games.gameRating}</Card.Text>\n                                        {Auth.loggedIn() && (\n                                            <Button variant=\"primary\" onClick={() => {handleSaveMedia(games.gameId); }}>Save to your favorites!</Button>\n                                        )}\n                                        <Button variant=\"primary\" onClick={() => {setgameTrailerModal(true)\n                                         setTrailerModalTitle(games.gameName + \" game Trailer\"); }}\n                                        >Watch a trailer!</Button>\n                                    </Card.Body>\n                                </Card>\n                            </Col>   \n                        )   \n                    })}  \n                </Row>\n            </Container>\n            <TrailerModal\n                gameTrailerModal={gameTrailerModal}\n                setgameTrailerModal={setgameTrailerModal}\n                trailerModalTitle={trailerModalTitle}\n                setTrailerModalTitle={setTrailerModalTitle}\n            ></TrailerModal>    \n        </div>\n    );\n};\n\nexport default SearchMedia;"]},"metadata":{},"sourceType":"module"}